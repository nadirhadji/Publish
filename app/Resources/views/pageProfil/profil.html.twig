{% extends "base.html.twig" %}
{% block content %}

<div class="fos_user_user_show">

    <!-- User container -->

    <div class="container">
        <center>
            <div class="span3 well">
                <center>
                    <a href="#aboutModal" data-toggle="modal" data-target="#myModal"><img src="{{ asset('uploads/photo/' ~ user.image.fichier|slice(27,37) ) }}" name="aboutme" width="140" height="140" class="img-circle"></a>
                    <h3>{{ user.firstname }} {{ user.lastname }}</h3>
                    <em>click my face for more</em>
                </center>
            </div>


            {{ form(form, {'attr': {'class': 'class=btn js-add'}}) }}

            <!-- Modal -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title" id="myModalLabel">More About Joe</h4>
                        </div>
                        <div class="modal-body">
                            <center>
                                <img src="{{ asset('uploads/photo/' ~ user.image.fichier|slice(27,37) ) }}" name="aboutme" width="140" height="140" border="0" class="img-circle"></a>
                                <h3 class="media-heading">{{ user.firstname }} {{ user.lastname }}<small> {{ user.city }}</small></h3>
                                <span><strong>Skills: </strong></span>
                                <span class="label label-warning">HTML5/CSS</span>
                                <span class="label label-info">Adobe CS 5.5</span>
                                <span class="label label-info">Microsoft Office</span>
                                <span class="label label-success">Windows XP, Vista, 7</span>
                            </center>
                            <hr>
                            <center>
                                <p class="text-left"><strong>Bio: </strong><br>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut sem dui, tempor sit amet commodo a, vulputate vel tellus.</p>
                                <br>
                            </center>
                        </div>
                        <div class="modal-footer">
                            <center>
                                <button type="button" class="btn btn-default" data-dismiss="modal">I've heard enough about {{ user.firstname }}</button>
                            </center>
                        </div>
                    </div>
                </div>
            </div>

        </center>
    </div>



    <!-- Publication de l utilisateur -->

    {# Boucle d'affichage des publications selon le contenu de la BDD#}
    {% for publication in publications %}
        {% if (publication.user == user) %}
            <!-- Zone Publication-->
            <div class="box box-widget">
                <div class="box-header with-border">
                    <div class="user-block">
                        <!-- Zone Photo de profil-->
                        <img class="img-circle" src="{{ asset('uploads/photo/' ~ publication.user.image.fichier|slice(27,37) )  }}" alt="User Image">
                        <span class="username"><a href="#">{{ publication.user.username }}</a></span>
                        <span class="description">Shared publicly - {{ publication.datePublication|date('d/m/Y h:m') }}</span>
                    </div>
                    <!-- Bouton pour fermer ou reduire une publication -->
                    <div class="box-tools">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <!-- Contenu de la publication -->
                <div class="box-body">
                    <p>{{ publication.contenu }}</p>

                        {#Affichage image si elle existe#}
                      {% if publication.image is not null %}
                          {{ publication.image.fichier|slice(12,23) }} Difference entre Mac et windows faire attention
                         <img class="img-responsive" src="{{ asset('uploads/photo/' ~ publication.image.fichier|slice(27,37) )  }}" alt=" Image" height="100" width="200">
                      {% endif %}
                         <!-- Zone commentaire -->
                         <div class="box-footer box-comments">
                             {% for commentaire in commentaires %}
                                 {% if commentaire.publication == publication %}
                                     <div class="box-comment">
                                         <!-- Photo de profil de l'utilisateur -->
                                         <img class="img-circle img-sm" src="{{ asset('uploads/photo/' ~ commentaire.user.image.fichier|slice(27,37) )  }}" alt="User Image" >
                                         <div class="comment-text">
                                               <span class="username">
                                                 {{ commentaire.user.username }}
                                                 <span class="text-muted pull-right">{{ publication.datePublication|date('d-m-Y') }}</span>
                                               </span><!-- /.username -->
                                             {{ commentaire.text }}
                                         </div>
                                         <!-- /.comment-text -->
                                     </div>
                                 {% endif %}
                             {% endfor %}
                         </div>
                        {% include 'commentaire.html.twig' %}
                </div>
            </div>
        {% endif %}
    {% endfor %}

            <!-- User post -->

    {% endblock %}